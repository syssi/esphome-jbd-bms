<<: !include esp32-example-debug.yaml

jbd_bms:
  - id: bms0
    uart_id: uart_0
    update_interval: 2s
    rx_timeout: ${rx_timeout}

interval:
  - interval: 5s
    then:
      # Start: 0xDD 0x03 0x00 0x1D
      - lambda: |-
          id(bms0).on_jbd_bms_data_(JBD_CMD_HWINFO, {
            0x06, 0x18, 0x00, 0x00, 0x01, 0xF2, 0x01, 0xF4, 0x00, 0x00, 0x2C, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
            0x80, 0x64, 0x03, 0x04, 0x03, 0x0B, 0x8B, 0x0B, 0x8A, 0x0B, 0x84
          });
      # End: 0xFA 0x8D 0x77

      - delay: 1s
      # Start: 0xDD 0x04 0x00 0x08
      - lambda: |-
          id(bms0).on_jbd_bms_data_(JBD_CMD_CELLINFO, {0x0F, 0x45, 0x0F, 0x3D, 0x0F, 0x37, 0x0F, 0x3D});
      # End: 0xFE 0xC6 0x77

      - delay: 1s
      # Start: 0xDD 0x05 0x00 0x19
      - lambda: |-
          id(bms0).on_jbd_bms_data_(JBD_CMD_HWVER, {
            0x4A, 0x42, 0x44, 0x2D, 0x53, 0x50, 0x30, 0x34, 0x53, 0x30, 0x33, 0x34, 0x2D, 0x4C, 0x34, 0x53, 0x2D, 0x32,
            0x30, 0x30, 0x41, 0x2D, 0x42, 0x2D, 0x55
          });
      # End: 0xFA, 0x08, 0x77
